<!DOCTYPE html>
<html>
<head>
	<title></title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">


	<style>

		.col-md-3 {
			margin-top: 10px;
		}
		.col-md-9 {
			margin-top: 10px;
		}	

	</style>


</head>
<body>

	<div class="row">
		<div class="col-md-3">

			<form id="search-form">
				<input type="text" class="form-control" id="query" placeholder="Address..."></br>
				<button class="btn btn-default" id="query" type="submit">Submit</button>
			</form>

		</div>

		<div class="col-md-9">
			<textarea class="form-control" id="outputForm" rows="10"></textarea>
		</div>

	</div>




	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<script>



	($(function(global) {

			var url = 'http://api.nestoria.co.uk/api?' +
			'country=uk&' +
			'pretty=1&' + 
			'action=search_listings&' +
			'encoding=json' +
			'&listing_type=buy&' +
			'page=1&' +
			'number_of_results=6';

			var nestoriaApi = {
				getLocations: function (placeName, successCallback, errorCallback) {


					$.ajax({
						url: url + '&place_name=' + placeName,
						type: 'GET',
						dataType: "jsonp",
						success: successCallback,
						error: errorCallback
					});


				}
			};

			global.nestoriaApi = nestoriaApi;


})(window);




		$(function() {




			// находим форму
			var $searchForm = $("#search-form"); 
		 	// находим input
		 	var $query = $("#query");

		 	// создаем функцию callback для submit формы
		 	var onSubmitHundler = function onSubmitHundler(event) {
		 			// this - объект элемента на котором произошло событие
		 			var inputValue = $query.val();

		 			console.log(inputValue);

		 			var error = function (data) {
		 						console.log(data);
		 			};
		 			success = error;


		 			nestoriaApi.getLocations(inputValue, success, error);




		 			// отмена стандартного поведения перезагрузки страницы
		 			event.preventDefault();
		 			
		 		};

		 		$searchForm.on('submit', onSubmitHundler);	






		 	});



</script>

<!-- add LiveReload function -->
<script>
	document.write('<script src="http://' + (location.host || 'localhost')
		.split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
</script>


</body>
</html>